.. _software_updates:

ソフトウェア更新履歴
====================

pygeonlp v1.1.1 (2021-08-30)

- 機能変更

  - 地名解析辞書（都道府県および鉄道）を更新
    
    - 旧 GeoNLP の geonlp\_id を利用していたため、新たに振り直しました
    - 今後は辞書を更新しても geolod\_id は変更しない予定です

- 不具合修正
  
  - geoparse で地名語や住所の候補が多数含まれていて、組み合わせ数が多すぎる場合に、
    自動的に部分文字列に分割する処理が永遠に終わらないことがある不具合の修正
  
- その他の変更
  
  - 辞書更新に伴い API のドキュメントに含まれるサンプルコードの出力結果を修正


pygeonlp v1.1.0 (2021-07-29)

- 機能変更

  - 地名解析辞書を削除して、利用可能な辞書が一つもなくなっても
    エラーとしないように変更
  - ``setActiveClasses()`` で、除外するクラスは最後に評価していたのを
    配列の順番通りに評価するように変更し、「ある条件に一致するクラスは除外、
    ただし次の条件に一致するクラスは除外しない」という指定が可能
  - jageocoder を必須モジュールとして自動インストールするように変更、
    ただし辞書がインストールされていなければ利用しない
  - ウェブサービス機能 pygeonlp-webapi v1.1.0 を提供開始

- 不具合修正

  - 地名解析辞書を削除した後に、別の辞書を追加すると、追加した辞書に
    含まれる地名語が解析に利用できない不具合を修正
  - 解析する文字列の住所に含まれる「番」と「番地」が適切に解析できない不具合を修正
  - NEologd を利用すると「千代田区一ツ橋」などが一語になり、住所ジオコーディングが
    機能しない問題を修正
  - ``setup_basic_database()`` でパッケージに同梱している基本地名解析辞書が
    見つからない場合がある問題を修正

- その他の変更

  - ドキュメントを ``/doc/`` 以下に追加

pygeonlp v1.0.1 (2021-07-13)

- 機能変更

  - 複数プロセスによる一つのデータベースへの同時リードアクセスに対応
  - 地名語が連続する長いセンテンスの解析処理効率を改善
  - pygeonlp.api.parser.Perser の初期化時のオプションパラメータを capi_ma から service に変更

- 不具合修正

  - C++ 内の処理で sqlite3 ファイルのパスに '//' が含まれていた箇所を修正
  - Parser がモジュールメソッド getWordInfo() を利用して parser に紐づけられていないデータベースにアクセスすることがあったため、初期化時に指定された service の getWordInfo() を呼ぶように修正
  - 住所文字列に続く形態素の先頭部分が住所文字列の最後尾として解析されてしまう不具合を修正

- その他の変更

  - README, README_ja に含まれていた古いバージョンの記述を更新


Ver. 2.0.0
  Python 用モジュール pygeonlp v1.0.0 として再構築

Ver. 1.2.0

  :ref:`webapi_parse_option_geotime_filter` を追加
  
  :ref:`webapi_parse_option` に "geojson" を追加。true にセットした場合、
  :ref:`webapi_parse` , :ref:`webapi_parseStructured` API のレスポンスを GeoJSON 準拠の :ref:`webapi_response_feature_collection` に変更できる。

  今後このレスポンス形式を推奨します。

Ver. 1.1.0

  :ref:`software_dic_util` をダウンロードパッケージに追加

  :ref:`dist_server` 機能を追加

  このバージョンより、 :ref:`software_dic_util` を含むため、地名解析辞書はパッケージに同梱されませんので注意してください。

Ver. 1.0.7

  configure 時に --with-dams オプションを指定できるように修正

  DAMS を利用している場合に実行される住所解析で、町名と字名が同じ住所（「北海道磯谷郡蘭越町蘭越町」など）の場合に町と字の地名語が正しく対応づけられないことがある不具合を修正（この修正を有効にするには、「日本の郡・市区町村」辞書および「日本の大字」辞書を、 address_level 項目が含まれている 2014 年 1 月 14 日以降のバージョンに更新する必要があります。同梱されている辞書は更新済みです。）
  
  :ref:`cmd_geonlp_ma` の出力フォーマットを CaboCha の layer 1 に合わせ、係り受け解析処理に利用できるように変更

  php 拡張モジュールを PHP 5.4 以降でもパッチを当てずにコンパイルできるように修正

Ver. 1.0.6

  同綴地名が複数存在し、他の地名語との関連だけでは判断できない場合に、他の地名語との空間的な距離が近い方を選択するロジックを追加

  ジオコーダを利用時に同綴住所が存在する場合、他の地名語との空間的な距離が近い方を選択するロジックを追加

  リクエストに改行コードが含まれると、処理中に欠落してしまう不具合を修正

Ver. 1.0.5

  `住所ジオコーダ DAMS <http://newspat.csis.u-tokyo.ac.jp/geocode/modules/dams/>`_ との連携機能を追加

ver. 1.0.4

  同綴地名が複数存在する場合の選択ロジックを改良

ver. 1.0.3

  Debian パッケージでインストールされた MeCab 辞書の自動判別機能を追加

ver. 1.0.2

  configure 時に libsqlite3 がインストールされていないとエラーになるように修正

  debian 7.1 で configure が生成する Makefile ではコンパイルが通らない問題に対応

  ToDo: debian パッケージでインストールされた MeCab 辞書の自動判別に失敗する問題には未対応

ver. 1.0.1

  インストール前、インストール後に動作確認を行う make test-preinstall, test-postinstall を追加
